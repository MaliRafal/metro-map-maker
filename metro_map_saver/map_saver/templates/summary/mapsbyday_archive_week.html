{% extends "base.html" %}

{% block content %}

    <h3 class="visible-xs">{{ week|date:"Y" }} Week #{{ week|date:"W"}} ({{ maps_count }} maps)</h3>

    <div id="calendar-controls">
        {% if previous_week %}
            <a href="{% url 'calendar-week' previous_week|date:"Y" previous_week|date:"W" %}" class="fs-3">
                <i class="bi bi-arrow-left-circle"></i> {{ previous_week|date:"Y" }} Week #{{ previous_week|date:"W" }}
            </a>
        {% endif %}

        {% if previous_week and next_week %}
            <span class="fs-3">|</span>
        {% endif %}

        {% if next_week %}

            {% if next_week|date:"W" == '1' and next_week|date:"Y" == week|date:"Y" %}
                {% comment %}
                    If the first week in a year starts in the previous year (like Monday, December 31, 2018),
                        don't loop back to January 2018.
                {% endcomment %}
                <a href="{% url 'calendar-week' next_week|date:"Y"|add:1 next_week|date:"W" %}" class="fs-3">
                    {{ next_week|date:"Y"|add:1 }} Week #{{ next_week|date:"W"}} <i class="bi bi-arrow-right-circle"></i>
                </a>
            {% else %}
                <a href="{% url 'calendar-week' next_week|date:"Y" next_week|date:"W" %}" class="fs-3">
                    {{ next_week|date:"Y" }} Week #{{ next_week|date:"W"}} <i class="bi bi-arrow-right-circle"></i>
                </a>
            {% endif %}
        {% endif %}
    </div>

    <div id="list" class="visible-xs">
        <table class="table table-striped table-light align-middle">
            <tbody>
                {% for map in maps %}
                    <tr>
                        <th scope="col">
                            <a href="{% url 'calendar-day' map.day|date:'Y' map.day|date:'m' map.day|date:'d' %}">{{ map.day|date:"F j, Y" }}</a>
                        </th>
                        <td>
                            <a href="{% url 'calendar-day' map.day|date:'Y' map.day|date:'m' map.day|date:'d' %}">{{ map.maps }} maps</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div id="calendar" class="hidden-xs">
        {{ calendar|safe }}
    </div>

{% endblock content %}
